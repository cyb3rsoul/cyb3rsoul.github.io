<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <!-- Meta tags for social media banners, these should be filled in appropriatly as they are your "business card" -->
  <!-- Replace the content tag with appropriate information -->
  <meta name="description" content="DESCRIPTION META TAG">
  <meta property="og:title" content="SOCIAL MEDIA TITLE TAG"/>
  <meta property="og:description" content="SOCIAL MEDIA DESCRIPTION TAG TAG"/>
  <meta property="og:url" content="URL OF THE WEBSITE"/>
  <!-- Path to banner image, should be in the path listed below. Optimal dimenssions are 1200X630-->
  <meta property="og:image" content="static/image/your_banner_image.png" />
  <meta property="og:image:width" content="1200"/>
  <meta property="og:image:height" content="630"/>


  <meta name="twitter:title" content="TWITTER BANNER TITLE META TAG">
  <meta name="twitter:description" content="TWITTER BANNER DESCRIPTION META TAG">
  <!-- Path to banner image, should be in the path listed below. Optimal dimenssions are 1200X600-->
  <meta name="twitter:image" content="static/images/your_twitter_banner_image.png">
  <meta name="twitter:card" content="summary_large_image">
  <!-- Keywords for your paper to be indexed by-->
  <meta name="keywords" content="KEYWORDS SHOULD BE PLACED HERE">
  <meta name="viewport" content="width=device-width, initial-scale=1">


  <title>Academic Project Page</title>
  <link rel="icon" type="image/x-icon" href="static/images/favicon.ico">
  <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro"
  rel="stylesheet">

  <link rel="stylesheet" href="static/css/bulma.min.css">
  <link rel="stylesheet" href="static/css/bulma-carousel.min.css">
  <link rel="stylesheet" href="static/css/bulma-slider.min.css">
  <link rel="stylesheet" href="static/css/fontawesome.all.min.css">
  <link rel="stylesheet"
  href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
  <link rel="stylesheet" href="static/css/index.css">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://documentcloud.adobe.com/view-sdk/main.js"></script>
  <script defer src="static/js/fontawesome.all.min.js"></script>
  <script src="static/js/bulma-carousel.min.js"></script>
  <script src="static/js/bulma-slider.min.js"></script>
  <script src="static/js/index.js"></script>

  <style>
    img {
      max-width: 100%;
      height: auto;
      border: 2px solid red;
    }
  </style>
</head>
<body>


  <section class="hero">
    <div class="hero-body">
      <div class="container is-max-desktop">
        <div class="columns is-centered">
          <div class="column has-text-centered">
            <h1 class="title is-1 publication-title">RIaaS</h1>
            <div class="is-size-5 publication-authors">
              <!-- Paper authors -->
              <span class="author-block">
                <a href="FIRST AUTHOR PERSONAL LINK" target="_blank">First Author</a><sup>*</sup>,</span>
                <span class="author-block">
                  <a href="SECOND AUTHOR PERSONAL LINK" target="_blank">Second Author</a><sup>*</sup>,</span>
                  <span class="author-block">
                    <a href="THIRD AUTHOR PERSONAL LINK" target="_blank">Third Author</a>
                  </span>
                  </div>

                  <div class="is-size-5 publication-authors">
                    <span class="author-block">Institution Name<br>Conferance name and year</span>
                    <span class="eql-cntrb"><small><br><sup>*</sup>Indicates Equal Contribution</small></span>
                  </div>

                  <div class="column has-text-centered">
                    <div class="publication-links">
                         <!-- Arxiv PDF link -->
                      <span class="link-block">
                        <a href="https://arxiv.org/pdf/<ARXIV PAPER ID>.pdf" target="_blank"
                        class="external-link button is-normal is-rounded is-dark">
                        <span class="icon">
                          <i class="fas fa-file-pdf"></i>
                        </span>
                        <span>Paper</span>
                      </a>
                    </span>

                    <!-- Supplementary PDF link -->
                    <span class="link-block">
                      <a href="static/pdfs/supplementary_material.pdf" target="_blank"
                      class="external-link button is-normal is-rounded is-dark">
                      <span class="icon">
                        <i class="fas fa-file-pdf"></i>
                      </span>
                      <span>Supplementary</span>
                    </a>
                  </span>

                  <!-- Github link -->
                  <span class="link-block">
                    <a href="https://github.com/cyb3rsoul/k8s-robot-operator" target="_blank"
                    class="external-link button is-normal is-rounded is-dark">
                    <span class="icon">
                      <i class="fab fa-github"></i>
                    </span>
                    <span>Code</span>
                  </a>
                </span>

                <!-- ArXiv abstract Link -->
                <span class="link-block">
                  <a href="https://arxiv.org/abs/<ARXIV PAPER ID>" target="_blank"
                  class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                    <i class="ai ai-arxiv"></i>
                  </span>
                  <span>arXiv</span>
                </a>
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>


<!-- Paper abstract -->
<section class="section hero is-light">
  <div class="container is-max-desktop">
    <div class="columns is-centered has-text-centered">
      <div class="column is-four-fifths">
        <h2 class="title is-3">Abstract</h2>
        <div class="content has-text-justified">
          <p>As a cloud engineer I recently had the chance to talk to a few people working embedded AI and robotics. In this emerging field it seems like a proper infrastructure is again a bottleneck for most. Not only another development environment and research platform but something that can really be used to deploy a solution to customers.
            In my view the goal is to deliver unified, robust and scalable infrastructure that can be applied regardless of the product and the robot's hardware platform.
            Here is my big statement: Kubernetes has a bright future in robotics. Unless you have been living under a rock for the last 10 years you must be aware of its power and proven production qualities, so I will not explain "why Kubernetes?” Quite the opposite I will try to design a system utilising the power of Kubernetes on board of the robots.
            </p>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- End paper abstract -->

<!-- Clarification section -->
<section class="section hero is-light">
  <div class="container is-max-desktop">
    <div class="columns is-centered has-text-centered">
      <div class="column is-four-fifths">
        <h5 class="title is-5">Clarification</h5>
        <div class="content has-text-justified">
          <p>
            To avoid getting too “complex” I will not discuss how the software that runs on a robot is developed and how the AI models are trained and so on - and it should not matter! This should be just a separate block of the system and everyone can do it their own way.
          </p>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- End clarification section -->

<!-- RIaaS section -->
<section class="section hero is-light">
  <div class="container is-max-desktop">
    <div class="columns is-centered">
      <div class="column is-four-fifths has-text-justified">
        <h2 class="title is-3">RIaaS - Robotics Infrastructure as Service</h2>
        <h3 class="subtitle is-4">Here is a high level of what I came up with:</h3>
        <div class="has-text-centered is-max-desktop">
        <img src="images/riaas_high_level.png" alt="High-level RIaaS diagram">
        <p class="is-size-6">Diagram 1 - High-level RIaaS Overview</p>
        <br>
        </div>
        <div class="content">
          <h3 class="title is-5">The Mothership</h3>
          <p>
            If you are a RaaS provider or robot manufacturer, you build your robots, build your software, but how do you manage and provide your services - Yes from the Mothership :) Centralised, scalable kubernetes cluster that hosts and manages your customers. On the above diagram you can see what could be running on this instance.
          </p>
          <h3 class="title is-5">Control Center</h3>
          <p>
            Every customer, ( CC - could also be your DEV/STAGE/PROD environments) can request a new Control Center(any cloud or on-prem) from the Mothership - this will deploy a new instance of the CC cluster. Again- secure, scalable kubernetes cluster on the cloud is a long solved problem( This will probably trigger some people :), but I am just saying that we don’t need to “invent” anything here). No need to focus how this is deployed, more importantly what will be running on it for the purpose of this article. The ControlCenter will manage your fleet of robots, it will host your monitoring systems and storage solutions, backup your robot data and so on.
          </p>
          <h3 class="title is-5">Robots</h3>
          <p>
            Now the cool part :) Every robot(virtual/real) is different, every software that runs on those robots is different (Monolith, Microservices with their own special communication (gRPc, ROS nodes), dependencies etc. I hear a lot of dev teams struggle with the configuration of the targets, managing dependencies, struggling with updates and rollbacks and so on. I just naturally think about kubernetes again. Why not run kubernetes on the robot? Let's consider the flow as a real use case. We have our CC provisioned and we need to add a new robot. I will not go into detail here, let's just assume you have your robot connected to the CC network and the Fleet Management service is able to connect to it and deploy a K3S cluster on this device(virtual machine, robot, jetson board or whatever…). K3s Much lighter than k8s, stable and well maintained ). Having the foundations set we need a few more things before starting deploying the robot brains! I am no robotics engineer and probably I am missing some things here, but let’s start somewhere. We need something to be able to “put together” a complex software on the k3s cluster. Manage changes, monitor state, and collect metrics/telemetry - One of my favourite Kubernetes topics- Operators. I think this could be a great solution for our problem - Kubernetes Operator for managing robots.
          </p>
        </br>
        <p>I will break this initial setup in two steps. 1. Provision_device 2. Deploy_robot.

          Provision device will be setting up the k3s cluster with the fundamentals required to manage a “robot brain”. For example:
          </p>
          <br>
          <div class="has-text-centered">
          <img src="images/provision_device.png" alt="Provision new device/robot">
          <p class="is-size-6">Diagram 2 - Provision new k3s cluster + dependencies</p>
          <br>
          </div>
          <p>Let's break down the above diagram. Deploying a robot operator.

            Wrapped in a helm chart for easy deployment and configuration(git repos, credentials etc). K3S includes a helm controller to manage helm deployments out of the box. Operator development is not a new thing and can be done in pretty much any language, and probably the goto is golang for its best integration with kubernetes api, but I will probably go for Rust. With recent developments in the kube-rs and other crates Rust is a perfect candidate for a light, secure and reliable Operator. Anyhow let's discuss the features/responsibilities that our Operator will have. As mentioned above we will have some dependencies before deploying the robot brain. 
            
            The Operator can deploy kube-state-metric+metrics-server. We will have plenty of metrics about our cluster objects, state, consumption and resource allocation. 
            
 
            Next the operator deploys FluentBit(or Vector- also written in Rust) - it is a very lightweight log processor with easy to configure filters for managing log collection rules.
            
            
            And last but not least we need some light database to store these logs and metrics in a structured way so later they can be uploaded to our ControlCenter, for further storage, analysis and training. For this I will go for SQLite. Lightweight and reliable.(Fun fact even the default K3s embed database is SQLite- for single nodes though.For multi node clusters the default option is etcd).
            </p>
            <p>So having our “cluster monitoring” and storage configured we can move to the next step 2. deploying the “Robot”. Now the FleetManagment system has a “ready to deploy device”(provisioning the foundations was successful), It is time to “add a robot”. In a complete system the user/customer will trigger a “deploy new robot” request from the CustomerPortal and the FleetManagment will parse the data and create the yaml for us and apply it, or we create the yaml and apply it now the k3s cluster so the operator can see it. You get the idea.</p>
          <br>
            <div class="has-text-centered">
          <img src="images/deploy_robot.png" alt="Create Robot instance">
          <p class="is-size-6">Diagram 3 - Create new Robot</p>
          <br>
          </div>
          <h3 class="title is-5">Deploying a "Robot"</h3>
          <p>Here is how I imagine the flow for deploying a robot by the operator. 
            You can find the complete CRD's definitions <a href="https://github.com/cyb3rsoul/k8s-robot-operator/tree/main/crds" target="_blank">here</a><sup>*</sup>,</span> or just follow the example below.
          
            Let's assume we apply something like this:
            </p>
            <div class="content">
              <pre><code>Robot:
                robotName: robot-001
                robotType: real
                manifestLocation: https://github.com/my_robot_manifests/
                path: /humanoid_robot
                telemetry: true
                </code></pre>
              <br>
              <p>So we create a new Robot instance, the Operator sees the new resource and inspects it. Looking up the manifest location, the operator automatically creates three new resources: RobotRelease, RobotUpdate, and RobotTelemetry.</p>       
              <br>
              <pre><code>RobotRelease:
            name: Robot name - release
            version: Fetched commit hash or helm chart version
            robotName: reference to Robot resource name
            manifestLocation: copied from Robot resource
            robotUpdate: initially empty (updated later after the operator creates RobotUpdate)
            </code></pre>
              
              <br>
              <pre><code>RobotUpdate:
            name: Robot name - update
            robotName: reference to Robot object
            targetRelease: the name of RobotRelease object to deploy
            currentRelease: current RobotRelease object or empty if initial deployment
            status: InProgress, Deployed or Failed
            </code></pre>
              
              <br>
              <pre><code>RobotTelemetry:
            name: Robot name - telemetry
            robotName: reference to Robot object
            status: enabled/disabled
            metrics: [cpu, memory, custom]
            logs:
              pod: Name of pod/s or all
              matchLabel: label to match pods
            </code></pre>
            </div>

            <p>In case you like diagrams like I do, here is another one: </p>
            <br>
            <div class="has-text-centered">
            <img src="images/robot_operator_crds.png" alt="Robot Operator CRD refs">
            <p class="is-size-6">Diagram 4 - Operator CRD's reference</p>
            <br>
            </div>
            <p>Having those resources the Operator can pretty much handle everything from deploying, updating and monitoring. Of course the operator logic could get way more complicated, but I think this is a good foundation. The CRDs will also be quite helpful looking up resources, finding out  their state and bubbling up this data to the ControlCenter(FleetManagment, Monitoring etc) even with just simple kubectl commands.</p>

            <h3 class="title is-5">Summary</h3>
            <p>Looking back to Diagram 1, the whole system is modular, but  there are a lot of pieces that need to be implemented which we don’t even consider in this article. For example developing the CustomerPlatform, Having the Mothership automated ControlCenter deployments(Terraform), FleetManagment, MissionControl and so on, but having this infrastructure we can also start working gradually. To do this I will start working backwards. 
              First we only need the Kubernetes Operator. Benefit from the automation and unified k3s environment, we can develop and deploy software on targets(real or virtual) efficiently.Second step will be manual deployment of a Control Center. Start developing the FleetManagment, Monitoring, MissionControl and etc. One static Control Center can manage a lot of bots. Then the last steps will be deploying the Mothership if there is a need to manage multiple CC and providing a CustomerPlatform.
              I greatly appreciate everyone who read through the  article and would like to know what you think? Am I completely out of scope? Am I missing something fundamental in my design? Is this something worth implementing?  Let  me know! 
              </p>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- End RIaaS section -->

  <footer class="footer">
  <div class="container">
    <div class="columns is-centered">
      <div class="column is-8">
        <div class="content">

          <p class="is-size-10">
            This page was built using the <a href="https://github.com/eliahuhorwitz/Academic-project-page-template" target="_blank">Academic Project Page Template</a>
          </p>
        </div>
      </div>
    </div>
  </div>
</footer>

<!-- Statcounter tracking code -->
  
<!-- You can add a tracker to track page visits by creating an account at statcounter.com -->

    <!-- End of Statcounter Code -->

  </body>
  </html>
